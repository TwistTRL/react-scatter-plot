(this["webpackJsonpreact-scatter-plot"]=this["webpackJsonpreact-scatter-plot"]||[]).push([[0],{16:function(e,t,n){e.exports=n(24)},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(11),i=n(7),o=n(2),s=n(3),r=n(6),c=n(4),l=n(5),u=n(0),d=n.n(u),h=n(15),v=n.n(h),p=n(9),m=n.n(p);function g(e,t,n,a){return e-(a-t)/((n-t)/e)}var b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(c.a)(t).call(this,e))).drawScatterPlot=function(e){var t=n.props,a=t.dataSets,i=t.dataPointColors,o=t.visibleXRange,s=t.visibleYRange,r=t.xAxisKey,c=t.yAxisKey,l=t.configs;if(void 0!==a){var u=l.plotStyling.dotSize>0?l.plotStyling.dotSize:n.dotCanvasSize;e.clearRect(0,0,n.canvasW,n.canvasH),e.beginPath(),a.forEach((function(t,a){t.length>0&&t.forEach((function(t){var l,d,h,v,p=(d=n.canvasW,h=o[0],v=o[1],(t[r]-h)/((v-h)/d)-u/2),m=n.getCircle(i[a],u);l=g(n.canvasH,s[0],s[1],t[c])-u/2,e.drawImage(m,p,l)}))}))}},n.canvasW=n.props.width,n.canvasH=n.props.height,n.dataPointColorCanvasCache={},n.dotCanvasSize=6,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.scatterPlotCanvas=this.refs.scatterPlotCanvas,this.scatterPlotCtx=this.scatterPlotCanvas.getContext("2d"),this.drawScatterPlot(this.scatterPlotCtx)}},{key:"componentDidUpdate",value:function(e,t){this.drawScatterPlot(this.scatterPlotCtx)}},{key:"shouldComponentUpdate",value:function(e,t){return!m()(this.props,e)||this.state!==t}},{key:"getCircle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=this.dataPointColorCanvasCache[e+t];if(void 0===n){var a=document.createElement("canvas");a.width=t,a.height=t;var i=a.getContext("2d");i.arc(t/2,t/2,t/3,0,2*Math.PI),i.fillStyle=e,i.fill(),n=a}return n}},{key:"render",value:function(){return d.a.createElement("canvas",{className:"scatter-plot-canvas",ref:"scatterPlotCanvas",width:this.canvasW,height:this.canvasH,style:{position:"absolute"}})}}]),t}(u.Component);function f(e){return Math.round(5*Math.ceil(e/5))}var O=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(c.a)(t).call(this,e))).toDomYCoord_Linear=function(e,t,n,a){return e-(a-t)/((n-t)/e)},n.generateYAxisLabels=function(e,t,n){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,i=arguments.length>4?arguments[4]:void 0,o=[],s=Math.round(n/(i+a)),r=f(t-e),c=f(r/s),l=-c;l>f(e);l-=c)o.push(l);for(var u=0;u<f(t);u+=c)o.push(u);return o},n.drawYAxis=function(e){var t=n.props.configs.axis.yAxisLabelPadding,a=n.generateYAxisLabels(n.minY,n.maxY,n.canvasH,t,20);e.clearRect(0,0,n.canvasW,n.canvasH),e.beginPath(),e.strokeStyle="black",e.lineWidth=2.5,e.font="500 13px Museo Sans, sans-serif",e.lineWidth=.6,e.textBaseline="middle",e.textAlign="right",e.fillStyle="gray",e.moveTo(n.canvasW,5),e.lineTo(n.canvasW,n.canvasH-5),e.stroke(),a.forEach((function(t){var a=n.toDomYCoord_Linear(n.canvasH,n.minY,n.maxY,t);e.moveTo(n.canvasW-5,a),e.lineTo(n.canvasW,a),e.fillText(t,n.canvasW-10,a)})),e.stroke()},n.canvasW=n.props.canvasW,n.canvasH=n.props.canvasH,n.minY=n.props.minY,n.maxY=n.props.maxY,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.yAxisCanvas=this.refs.yAxisCanvas,this.yAxisCtx=this.yAxisCanvas.getContext("2d"),this.drawYAxis(this.yAxisCtx)}},{key:"componentDidUpdate",value:function(){this.minY=this.props.minY,this.maxY=this.props.maxY,this.drawYAxis(this.yAxisCtx)}},{key:"roundToNearestTenth",value:function(e){return 10*(parseInt(e/10,10)+1)}},{key:"render",value:function(){return d.a.createElement("canvas",{className:"plot-y-axis",ref:"yAxisCanvas",width:this.canvasW,height:this.canvasH})}}]),t}(u.Component);function j(e){return Math.round(5*Math.ceil(e/5))}var x=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(c.a)(t).call(this,e))).generateYAxisLabels=function(e,t,n,a,i){for(var o=[],s=Math.round(n/(i+a)),r=j(t-e),c=j(r/s),l=-c;l>j(e);l-=c)o.push(l);for(var u=0;u<j(t);u+=c)o.push(u);return o},n.drawYAxisGrid=function(e){var t=n.generateYAxisLabels(n.minY,n.maxY,n.canvasH,20,20);e.clearRect(0,0,n.canvasW,n.canvasH),e.beginPath(),e.strokeStyle="rgba(211,211,211, 0.6)",e.lineWidth=1,t.forEach((function(t){var a=g(n.canvasH,n.minY,n.maxY,t);e.moveTo(0,a),e.lineTo(n.canvasW,a)})),e.stroke()},n.canvasW=n.props.canvasW,n.canvasH=n.props.canvasH,n.minY=n.props.minY,n.maxY=n.props.maxY,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.plotAxisGridCanvas=this.refs.plotAxisGridCanvas,this.plotAxisGridCtx=this.plotAxisGridCanvas.getContext("2d"),this.drawYAxisGrid(this.plotAxisGridCtx)}},{key:"componentDidUpdate",value:function(){this.minY=this.props.minY,this.maxY=this.props.maxY,this.drawYAxisGrid(this.plotAxisGridCtx)}},{key:"roundToNearestTenth",value:function(e){return 10*(parseInt(e/10,10)+1)}},{key:"render",value:function(){return d.a.createElement("canvas",{className:"plot-axis-grid",ref:"plotAxisGridCanvas",width:this.canvasW,height:this.canvasH})}}]),t}(u.Component);var C,y,M,P,k,E,Y,H,S=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!m()(this.props,e)||this.state!==t}},{key:"render",value:function(){var e=this.props,t=e.dataSets,n=e.dataPointColors,a=e.width,i=e.height,o=e.minY,s=e.maxY,r=e.xAxisKey,c=e.yAxisKey,l=e.configs,u=e.isRenderPlotOnly;if(t.length<1||void 0===t)return null;var h,v=l.axis,p=v.isDynamicXAxis,m=v.isDynamicYAxis,g=v.yAxisPadding,f=(l.plotStyling.dotSize,[Number.MAX_VALUE,Number.MIN_VALUE]),j=p?this.props.visibleXRange:[Number.MAX_VALUE,Number.MIN_VALUE],C=0,y=[];return t.forEach((function(e,t){y[t]=e.filter((function(e){return p||(e[r]<j[0]?j[0]=e[r]:e[r]>j[1]&&(j[1]=e[r])),m?e[r]>=j[0]&&e[r]<=j[1]&&(e[c]<f[0]?f[0]=e[c]:e[c]>f[1]&&(f[1]=e[c])):e[c]<f[0]?f[0]=e[c]:e[c]>f[1]&&(f[1]=e[c]),e[r]>=j[0]&&e[r]<=j[1]}))})),h=f[1]-f[0],C=5*Math.ceil(h/5),f[0]-=g>0?g:.1*C,f[1]+=g>0?g:.1*C,u?d.a.createElement(b,{dataSets:y,dataPointColors:n,visibleXRange:j,visibleYRange:null!==s?[o,s]:f,width:a,height:i,xAxisKey:r,yAxisKey:c,configs:l}):(f=null!==s?[o,s]:f,d.a.createElement("table",{className:"chart-table",style:{borderCollapse:"collapse"}},d.a.createElement("tbody",null,d.a.createElement("tr",{className:"chart-table-row"},d.a.createElement("td",{className:"chart-table-col",style:{width:40}}," ",d.a.createElement(O,{canvasW:40,canvasH:i,minY:f[0],maxY:f[1],configs:l})),d.a.createElement("td",{className:"chart-table-col",style:{width:1200}}," ",d.a.createElement("div",{style:{position:"absolute"}},d.a.createElement(x,{canvasW:1200,canvasH:i,minY:f[0],maxY:f[1],configs:l})),d.a.createElement("div",{style:{position:"absolute"}},d.a.createElement(b,{dataSets:y,dataPointColors:n,visibleXRange:j,visibleYRange:f,width:a,height:i,xAxisKey:r,yAxisKey:c,configs:l})))))))}}]),t}(u.Component),A=n(8),w=n(1),D=(n(21),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).handleMouseMove=function(e){e.stopPropagation(),(0,n.props.mouseMoveHandler)(e)},n.handleMouseUp=function(e){e.stopPropagation(),(0,n.props.mouseUpHandler)(e)},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.cursor;return d.a.createElement("div",{className:"fullscreen",style:{cursor:e}})}},{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.handleMouseMove,!0),document.addEventListener("mouseup",this.handleMouseUp,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("mouseup",this.handleMouseUp,!0)}}]),t}(u.PureComponent)),U=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return null}},{key:"componentDidMount",value:function(){var e=this.props,t=e.timeout,n=e.callback;this.timeout=setTimeout(n,t)}},{key:"componentDidUpdate",value:function(){clearTimeout(this.timeout);var e=this.props,t=e.timeout,n=e.callback;this.timeout=setTimeout(n,t)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}}]),t}(u.PureComponent),_=(n(22),"hovering"),W="mouseDown",T="mouseMove",X="mouseUp",R="timeout",L=(M={},Object(w.a)(M,_,Object(w.a)({},W,"clicking")),Object(w.a)(M,"clicking",(C={},Object(w.a)(C,R,"autoSelecting"),Object(w.a)(C,T,"selecting"),Object(w.a)(C,X,_),C)),Object(w.a)(M,"autoSelecting",(y={},Object(w.a)(y,R,"panning"),Object(w.a)(y,T,"selecting"),y)),Object(w.a)(M,"selecting",Object(w.a)({},X,_)),Object(w.a)(M,"panning",Object(w.a)({},X,_)),k={},Object(w.a)(k,_,Object(w.a)({},W,"clicking")),Object(w.a)(k,"clicking",(P={},Object(w.a)(P,R,"selecting"),Object(w.a)(P,T,"selecting"),Object(w.a)(P,X,_),P)),Object(w.a)(k,"selecting",Object(w.a)({},X,_)),Y={},Object(w.a)(Y,_,Object(w.a)({},W,"clicking")),Object(w.a)(Y,"clicking",(E={},Object(w.a)(E,R,"panning"),Object(w.a)(E,T,"panning"),Object(w.a)(E,X,_),E)),Object(w.a)(Y,"panning",Object(w.a)({},X,_)),Y),N=(H={},Object(w.a)(H,_,Object(w.a)({},W,"clicking")),Object(w.a)(H,"clicking",Object(w.a)({},X,_)),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(c.a)(t).call(this,e))).handleMouseMove_Hovering=function(e){(0,n.props.hoveringHandler)(n.getCustomEventObject(e))},n.handleMouseOut_Hovering=function(e){(0,n.props.hoverEndHandler)()},n.handleMouseDown_Hovering=function(e){var t=n.props.hoverEndHandler;e.preventDefault();var a=n.getCustomEventObject(e);n.initialMouseDownPosition=a,t(),n.transition(W)},n.clickTimeout=function(){n.transition(R)},n.autoSelectingTimeout=function(){n.transition(R)},n.handleMouseMove_Clicking=function(e){n.props.selectingHandler;var t=Object(A.a)(n).initialMouseDownPosition,a=n.getCustomEventObject(e);Math.abs(a.domX-t.domX)<10||Math.abs(a.domY-t.domX)<10||n.transition(T)},n.handleMouseUp_Clicking=function(e){var t=n.props,a=t.clickHandler,i=t.doubleClickHandler,o=Object(A.a)(n).prevClickTimeStamp,s=n.getCustomEventObject(e);null===o||o+200<e.timeStamp?(n.prevClickTimeStamp=e.timeStamp,a(s)):(n.prevClickTimeStamp=null,i(s)),n.transition(X)},n.handleMouseMove_AutoSelecting=function(e){var t=n.props.selectingHandler,a=Object(A.a)(n).initialMouseDownPosition,i=n.getCustomEventObject(e);Math.abs(i.domX-a.domX)<10||Math.abs(i.domY-a.domX)<10||(t({start:a,end:i}),n.transition(T))},n.handleMouseUp_AutoSelecting=function(e){n.transition(X)},n.handleMouseMove_Selecting=function(e){(0,n.props.selectingHandler)({start:Object(A.a)(n).initialMouseDownPosition,end:n.getCustomEventObject(e)})},n.handleMouseUp_Selecting=function(e){(0,n.props.selectedHandler)({start:Object(A.a)(n).initialMouseDownPosition,end:n.getCustomEventObject(e)}),n.transition(X)},n.handleMouseMove_Panning=function(e){(0,n.props.panningHandler)({start:Object(A.a)(n).initialMouseDownPosition,end:n.getCustomEventObject(e)})},n.handleMouseUp_Panning=function(e){(0,n.props.pannedHandler)({start:Object(A.a)(n).initialMouseDownPosition,end:n.getCustomEventObject(e)}),n.transition(X)},n.state={mode:_},n.ref=d.a.createRef(),n.initialMouseDownPosition=null,n.prevClickTimeStamp=null,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,a=e.children,i={width:t,height:n};switch(this.state.mode){case _:return d.a.createElement("div",null,d.a.createElement("div",{ref:this.ref,style:i,onMouseMove:this.handleMouseMove_Hovering,onMouseOut:this.handleMouseOut_Hovering,onMouseDown:this.handleMouseDown_Hovering},a));case"clicking":return d.a.createElement("div",null,d.a.createElement("div",{ref:this.ref,style:i},a),d.a.createElement(D,{mouseMoveHandler:this.handleMouseMove_Clicking,mouseUpHandler:this.handleMouseUp_Clicking,cursor:"point"}),d.a.createElement(U,{timeout:200,callback:this.clickTimeout}));case"autoSelecting":return d.a.createElement("div",null,d.a.createElement("div",{ref:this.ref,style:i},a),d.a.createElement(D,{mouseMoveHandler:this.handleMouseMove_AutoSelecting,mouseUpHandler:this.handleMouseUp_AutoSelecting,cursor:"nesw-resize"}),d.a.createElement(U,{timeout:500,callback:this.autoSelectingTimeout}));case"selecting":return d.a.createElement("div",null,d.a.createElement("div",{ref:this.ref,style:i},a),d.a.createElement(D,{mouseMoveHandler:this.handleMouseMove_Selecting,mouseUpHandler:this.handleMouseUp_Selecting,cursor:"nesw-resize"}));case"panning":return d.a.createElement("div",null,d.a.createElement("div",{ref:this.ref,style:i},a),d.a.createElement(D,{mouseMoveHandler:this.handleMouseMove_Panning,mouseUpHandler:this.handleMouseUp_Panning,cursor:"grabbing"}));default:return d.a.createElement("p",null,this.state.mode)}}},{key:"transition",value:function(e){var t=this.props.transitionGraph[this.state.mode][e];t&&this.setState({mode:t})}},{key:"getCustomEventObject",value:function(e){var t=this.ref.current.getBoundingClientRect(),n=t.left,a=t.top,i=e.clientX,o=e.clientY;return{domX:i-n,domY:o-a,clientX:i,clientY:o}}}]),t}(u.PureComponent)),G=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(c.a)(t).call(this,e))).handleHovering=function(e){n.setState(Object(i.a)({},n.state,{hoveringPosition:e})),n.props.handleHoverPosChange&&n.props.handleHoverPosChange(e)},n.handleHoverEnd=function(){n.setState(Object(i.a)({},n.state,{hoveringPosition:null})),n.props.handleHoverPosChange&&n.props.handleHoverPosChange(null)},n.handleClick=function(e){n.setState(Object(i.a)({},n.state,{clickPosition:e})),n.props.handleClick&&n.props.handleClick()},n.handleDoubleClick=function(e){n.setState(Object(i.a)({},n.state,{doubleClickPosition:e}))},n.handleSelecting=function(e){n.setState(Object(i.a)({},n.state,{selectingPositions:e}))},n.handleSelected=function(e){n.setState(Object(i.a)({},n.state,{selectedPositions:e,selectingPositions:null}))},n.handlePanning=function(e){n.setState(Object(i.a)({},n.state,{panningPositions:e})),n.props.handlePan&&n.props.handlePan(e)},n.handlePanned=function(e){n.setState(Object(i.a)({},n.state,{pannedPositions:e,panningPositions:null})),n.props.handlePanned&&n.props.handlePanned(e)},n.state={hoveringPosition:null,clickPosition:null,doubleClickPosition:null,selectingPositions:null,selectedPositions:null,panningPositions:null,pannedPositions:null},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.render,n=e.width,a=e.height;return d.a.createElement(N,{width:n,height:a,transitionGraph:L,hoveringHandler:this.handleHovering,hoverEndHandler:this.handleHoverEnd,clickHandler:this.handleClick,doubleClickHandler:this.handleDoubleClick,selectingHandler:this.handleSelecting,selectedHandler:this.handleSelected,panningHandler:this.handlePanning,pannedHandler:this.handlePanned},t(this.state))}}]),t}(u.Component),K=n(10),z=n.n(K);n(23);function I(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}var B=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(c.a)(t).call(this,e))).generateDummyData=function(e,t,n){for(var a,i,o=[],s=e[0];s<e[1];s+=n)o.push({time:s,value:(a=t[0],i=t[1],Math.floor(Math.random()*(i-a+1))+a)});return o},n.handlePan=function(e){n.state.maxY+(e.end.domY-e.start.domY-n.prevPanDist)>150&&(n.setState(Object(i.a)({},n.state,{maxY:n.state.maxY+(e.end.domY-e.start.domY-n.prevPanDist)})),n.prevPanDist=e.end.domY-e.start.domY)},n.handlePanned=function(e){n.prevPanDist=0},n.state={visibleXRange:[1513058e6,15136956e5],currentOverlay:null,dataSets:[],dataPointColors:["#d50000","#ff6d00","#546e7a"],minY:0,maxY:200},n.prevMaxY=200,n.prevPanDist=0,n.dataSetCount=4,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=[],t=[],n=z()(1482858e6),o=z()(15136956e5);console.log(Math.ceil(z.a.duration(o.diff(n,"days"))));for(var s=0;s<this.dataSetCount;s++)e[s]=Object(a.a)(this.generateDummyData([1482858e6,15136956e5],[1,this.state.maxY],1e8)),t[s]=I();this.setState(Object(i.a)({},this.state,{dataSets:e,dataPointColors:t}))}},{key:"render",value:function(){var e=this.state,t=e.dataSets,n=e.visibleXRange,i=e.dataPointColors,o=e.minY,s=e.maxY;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{style:{position:"absolute",cursor:"ns-resize"}},d.a.createElement(G,{width:40,height:400,handlePan:this.handlePan,handlePanned:this.handlePanned,render:function(){}})),d.a.createElement(S,{dataSets:t,visibleXRange:Object(a.a)(n),minY:o,maxY:s,width:1200,height:400,xAxisKey:"time",yAxisKey:"value",dataPointColors:i,isRenderPlotOnly:!1,configs:{axis:{isDynamicYAxis:!0,isDynamicXAxis:!0,yAxisLabelPadding:20,xAxisPadding:0},plotStyling:{dotSize:20}}}))}}]),t}(u.PureComponent);v.a.render(d.a.createElement(B,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.42f07452.chunk.js.map